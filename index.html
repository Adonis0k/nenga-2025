<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãŠã¿ãã˜ã‚¹ãƒ­ãƒƒãƒˆ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f0f0f0;
            margin: 0;
            padding: 0;
        }
        h1 {
            margin-top: 10px;
        }
        .happy-new-year {
            font-size: 2em;
            font-weight: bold;
            color: #ff5722;
        }
        .rules {
            font-size: 0.9em;
            margin: 10px auto;
            width: 80%;
            text-align: left;
            background-color: #fff;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        .slot-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px auto;
            width: 320px;
            background-color: #fff;
            padding: 10px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            position: relative;
        }
        .slot {
            width: 100px;
            height: 300px;
            display: flex;
            align-items: flex-start;
            border: 1px solid #ccc;
            border-radius: 10px;
            background-color: #e0e0e0;
            overflow: hidden;
            position: relative;
            flex-direction: column;
        }
        .slot img {
            width: 100%;
            height: auto;
            animation: none;
            transform: translateY(-85%);
        }
        .highlight {
            background-color: #ffeb3b;
        }
        .controls {
            margin: 20px 0;
        }
        .points {
            font-size: 1.2em;
            margin: 10px 0;
        }
        button {
            padding: 10px 20px;
            font-size: 1em;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:active {
            transform: scale(0.98);
        }
        button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
        .start {
            background-color: #28a745;
            color: #fff;
            width: 320px;
        }
        .stop {
            background-color: #dc3545;
            color: #fff;
        }
        .button-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 10px;
        }
        @keyframes slide-up {
            0% { transform: translateY(-85%); }
            100% { transform: translateY(-1385%); }
        }
        @keyframes slide-down {
            0% { transform: translateY(-1385%); }
            100% { transform: translateY(-85%); }
        }
        .points-table {
            margin-top: 20px;
            text-align: left;
            background-color: #fff;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            width: 360px;
            margin-left: auto;
            margin-right: auto;
        }

        .points-table h3 {
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        .points-table table {
            width: 100%;
            border-collapse: collapse;
        }

        .points-table table th, .points-table table td {
            padding: 8px 16px;
            text-align: center;
        }

        .points-table table th {
            background-color: #f0f0f0;
        }

        .points-table table tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        .points-table img {
            width: 50px;
            height: 50px;
            vertical-align: middle;
            margin-right: 8px;
        }

    </style>
</head>
<body>
    <div class="happy-new-year">ğŸ‰ Happy New Year 2025 ğŸ‰</div>
    <h1>ãŠã¿ãã˜ã‚¹ãƒ­ãƒƒãƒˆ</h1>
    <h2>made by ChatGPT</h2>
    <div class="rules">
        <strong>ãƒ«ãƒ¼ãƒ«:</strong>
        <ul>
            <li>ã‚¹ã‚¿ãƒ¼ãƒˆãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã‚¹ãƒ­ãƒƒãƒˆãŒå›è»¢ã—ã€10å¾³ãƒã‚¤ãƒ³ãƒˆæ¶ˆè²»ã—ã¾ã™ã€‚</li>
            <li>ã‚¹ãƒˆãƒƒãƒ—ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦å„åˆ—ã‚’åœæ­¢ã§ãã¾ã™ã€‚</li>
            <li>æ¨ªã¾ãŸã¯æ–œã‚ã«åŒã˜ã‚·ãƒ³ãƒœãƒ«ãŒæƒã†ã¨ãƒã‚¤ãƒ³ãƒˆãŒåŠ ç®—ã•ã‚Œã¾ã™ã€‚ç‰¹åˆ¥ãªåŠ¹æœã®ã‚·ãƒ³ãƒœãƒ«ã‚‚ã‚ã‚Šã¾ã™ã€‚</li>
            <li>è¤‡æ•°ã®ãƒ©ã‚¤ãƒ³ãŒåŒæ™‚ã«æƒã†ã¨å¤§å¹…ã«ç²å¾—ãƒã‚¤ãƒ³ãƒˆãŒã‚¢ãƒƒãƒ—ã—ã¾ã™ã€‚</li>
            <li>0å¾³ãƒã‚¤ãƒ³ãƒˆã«ãªã‚‹ã¨ä¸å¹¸ã§ã™ã€‚å¾³ã‚’è²¯ã‚ã¦ã‚ˆã„ï¼‘å¹´ã«ã—ã¾ã—ã‚‡ã†ã€‚</li>
        </ul>
    </div>
    <div class="slot-container" id="slot-container">
        <div class="slot" id="slot-0"></div>
        <div class="slot" id="slot-1"></div>
        <div class="slot" id="slot-2"></div>
    </div>
    <div class="button-container">
        <button class="stop" id="stop-0" disabled>ã‚¹ãƒˆãƒƒãƒ—1</button>
        <button class="stop" id="stop-1" disabled>ã‚¹ãƒˆãƒƒãƒ—2</button>
        <button class="stop" id="stop-2" disabled>ã‚¹ãƒˆãƒƒãƒ—3</button>
    </div>
    <div class="controls">
        <button class="start" id="start">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
    </div>
    <div class="points" id="points">100 å¾³ãƒã‚¤ãƒ³ãƒˆ</div>
    <div class="points-table">
        <h3>ãƒã‚¤ãƒ³ãƒˆè¡¨</h3>
        <table>
            <thead>
                <tr>
                    <th>ã‚·ãƒ³ãƒœãƒ«</th>
                    <th>ãƒã‚¤ãƒ³ãƒˆ</th>
                </tr>
            </thead>
            <tbody>
                <!-- ãƒã‚¤ãƒ³ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«ã¯ã“ã“ã«è¿½åŠ ã•ã‚Œã¾ã™ -->
            </tbody>
        </table>
    </div>
    
    <script>
        // ç”»åƒãƒ‡ãƒ¼ã‚¿ã¨ãƒã‚¤ãƒ³ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«
        // ç”»åƒã®ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ãƒªã‚¹ãƒˆåŒ–
        const imageFiles = {
            "daikichi1": "daikichi1.png",
            "daikichi2": "daikichi2.png",
            "daikichi3": "daikichi3.png",
            "kichi": "kichi.png",
            "chukichi1": "chukichi1.png",
            "chukichi2": "chukichi2.png",
            "chukichi3": "chukichi3.png",
            "shokichi": "shokichi.png",
            "suekichi": "suekichi.png",
            "kyo1": "kyo1.png",
            "kyo2": "kyo2.png",
            "kyo3": "kyo3.png",
            "daikyo": "daikyo.png"
        };
        const reel1Symbols = ["daikichi1", "kichi", "kichi", "chukichi1", "chukichi1", "shokichi", "shokichi", "suekichi", "suekichi", "suekichi", "kyo1", "kyo1", "daikyo"];
        const reel2Symbols = ["daikichi2", "kichi", "kichi", "chukichi2", "chukichi2", "shokichi", "shokichi", "suekichi", "suekichi", "suekichi", "kyo2", "kyo2", "daikyo"];
        const reel3Symbols = ["daikichi3", "kichi", "kichi", "chukichi3", "chukichi3", "shokichi", "shokichi", "suekichi", "suekichi", "suekichi", "kyo3", "kyo3", "daikyo"];
        const pointsTable = { 
            "daikichi1-daikichi2-daikichi3": 100, 
            "kichi-kichi-kichi": 50, 
            "chukichi1-chukichi2-chukichi3": 30, 
            "shokichi-shokichi-shokichi": 20, 
            "suekichi-suekichi-suekichi": 10, 
            "kyo1-kyo2-kyo3": 5, 
            "daikyo-daikyo-daikyo": 0,
        };
        let points = 100;
        let multiplier = 1; // ç¾åœ¨ã®å€ç‡
        let nextSpinMultiplier = 1; // æ¬¡å›ã‚¹ãƒ”ãƒ³æ™‚ã®å€ç‡
        let slots = [[], [], []];  // ã‚¹ãƒ­ãƒƒãƒˆã®å†…å®¹
        let isRotating = [false, false, false];  // å„ãƒªãƒ¼ãƒ«ãŒå›è»¢ä¸­ã‹ã©ã†ã‹

        // ãƒã‚¤ãƒ³ãƒˆã‚’æ›´æ–°ã™ã‚‹é–¢æ•°
        const updatePoints = () => {
            document.getElementById("points").textContent = `${points} å¾³ãƒã‚¤ãƒ³ãƒˆ`;
        };

        // ç”»åƒã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã—ã¦é•·ã•å€ã«ã—ãŸé…åˆ—ã‚’è¿”ã™é–¢æ•°
        const shuffleImages = (reelImages) => {
            const shuffled = [...reelImages].sort(() => Math.random() - 0.5);  // ã‚·ãƒ£ãƒƒãƒ•ãƒ«
            return shuffled.concat(shuffled).slice(0, shuffled.length * 2);  // ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã—ãŸç”»åƒã‚’2å€ã«ã—ã¦èª¿æ•´
        };

        // ã‚¹ãƒ­ãƒƒãƒˆã‚’åˆæœŸåŒ–ã™ã‚‹é–¢æ•°
        const initializeSlots = () => {
            const reelSymbols = [reel1Symbols, reel2Symbols, reel3Symbols];
            for (let i = 0; i < 3; i++) {
                const shuffledSymbols = shuffleImages(reelSymbols[i])
                slots[i] = shuffledSymbols;  // ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã—ãŸç”»åƒã‚’ã‚»ãƒƒãƒˆ

                const slot = document.querySelector(`#slot-${i}`);
                slot.innerHTML = '';  // æ—¢å­˜ã®ç”»åƒã‚’ã‚¯ãƒªã‚¢

                // ç”»åƒã‚’ã‚¹ãƒ­ãƒƒãƒˆã«è¿½åŠ 
                for (let j = 0; j < shuffledSymbols.length; j++) {
                    const img = document.createElement("img");
                    img.src = `images/${imageFiles[slots[i][j]]}`;
                    slot.appendChild(img);
                }
            }
        };

        // ãƒã‚¤ãƒ³ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«ã‚’HTMLã«è¿½åŠ ã™ã‚‹é–¢æ•°
        const renderPointsTable = () => {
            const pointsTableElement = document.querySelector('.points-table tbody');
            pointsTableElement.innerHTML = ''; // æ—¢å­˜ã®å†…å®¹ã‚’ã‚¯ãƒªã‚¢

            // ãƒã‚¤ãƒ³ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«ã®å†…å®¹ã‚’é †ç•ªã«è¿½åŠ 
            Object.keys(pointsTable).forEach((key) => {
                const line = key.split('-');
                const points = pointsTable[key];
                const row = document.createElement('tr');
                
                const symbolCell = document.createElement('td');
                line.forEach(symbol => {
                    const img = document.createElement('img');
                    img.src = `images/${imageFiles[symbol]}`;
                    symbolCell.appendChild(img);
                });

                const pointsCell = document.createElement('td');
                pointsCell.textContent = points;

                row.appendChild(symbolCell);
                row.appendChild(pointsCell);
                pointsTableElement.appendChild(row);
            });
        }


        const calculateAnimationDuration = (points) => {
            const maxDuration = 10;    // æœ€å¤§ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³æ™‚é–“ï¼ˆ1ãƒã‚¤ãƒ³ãƒˆã®å ´åˆï¼‰
            const minDuration = 0.3;  // æœ€å°ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³æ™‚é–“ï¼ˆ1000ãƒã‚¤ãƒ³ãƒˆã®å ´åˆï¼‰
            // 1ã‹ã‚‰1000ã®ç¯„å›²ã«å¯¾ã—ã¦ã€ãƒªãƒ‹ã‚¢è£œé–“ã‚’è¡Œã†
            const duration = maxDuration - (points - 1) / (1000 - 1) * (maxDuration - minDuration);
            // 100ãƒã‚¤ãƒ³ãƒˆã®æ™‚ã«1ç§’ã«ãªã‚‹ã‚ˆã†èª¿æ•´
            return Math.max(minDuration, Math.min(duration, maxDuration));  // ç¯„å›²å¤–ã«ã¯ãªã‚‰ãªã„ã‚ˆã†ã«èª¿æ•´
        };


        // ã‚¹ãƒ­ãƒƒãƒˆå›è»¢ã‚’é–‹å§‹ã™ã‚‹é–¢æ•°
        const startSlotRotation = () => {
            // ãƒã‚¤ãƒ³ãƒˆã«åŸºã¥ã„ã¦ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é€Ÿåº¦ã‚’è¨ˆç®—
            const animationDuration = calculateAnimationDuration(points);
            // å„ãƒªãƒ¼ãƒ«ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹å§‹
            for (let i = 0; i < 3; i++) {
                const slot = document.querySelector(`#slot-${i}`);
                const images = slot.querySelectorAll("img");
                // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¨­å®š
                console.log(`Reel ${i} images:`);
                images.forEach(img => {
                    console.log("  images:", getFileName(img.src));
                });

                // 2ç•ªç›®ã®ãƒªãƒ¼ãƒ«ï¼ˆçœŸã‚“ä¸­ï¼‰ã®å ´åˆã€é€†å›è»¢ã‚’é©ç”¨
                if (i === 1) {
                    images.forEach(img => {
                        img.style.animation = `slide-down ${animationDuration}s linear infinite`;  // é€†å›è»¢
                    });
                } else {
                    images.forEach(img => {
                        img.style.animation = `slide-up ${animationDuration}s linear infinite`;  // é€šå¸¸å›è»¢
                    });
                }
            }
        };

        // ã‚¹ãƒ­ãƒƒãƒˆå›è»¢ã‚’åœæ­¢ã™ã‚‹é–¢æ•°
        const stopSlotRotation = (slotIndex) => {
            const slot = document.querySelector(`#slot-${slotIndex}`);
            const images = slot.querySelectorAll("img");
            const imageHeight = images[0].offsetHeight; // ç”»åƒã®é«˜ã•ã‚’å–å¾—


            // å†æç”»ã‚’å¾…ã¤
            requestAnimationFrame(() => {
                // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åœæ­¢ã™ã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’æ­£ç¢ºã«è¨ˆç®—
                // ç¾åœ¨ã®ç”»åƒã®ä½ç½®ã‚’å–å¾—ï¼ˆtranslateYï¼‰
                const computedStyle = getComputedStyle(images[0]);
                const matrix = computedStyle.transform; // ä¾‹: "matrix(1, 0, 0, 1, 0, -400)"
                
                let currentTranslateY = 0;
                if (matrix !== "none") {
                    const values = matrix.match(/matrix.*\((.+)\)/)[1].split(', ');
                    currentTranslateY = parseFloat(values[5]); // Y è»¸æ–¹å‘ã®å€¤ã‚’å–å¾—
                }
                // åœæ­¢ä½ç½®ã‚’è¨ˆç®—
                const stopPosition = Math.round(Math.abs(currentTranslateY + (imageHeight*0.85)) / imageHeight) % images.length;
                console.log("stopPosition:", stopPosition);
                // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åœæ­¢
                images.forEach((img) => {
                    img.style.animation = "none";
                });
                // ã‚¹ãƒ­ãƒƒãƒˆã®ç”»åƒã‚’åœæ­¢ä½ç½®ã«åˆã‚ã›ã‚‹
                const newSrcs = []; // ä¸€æ™‚çš„ã«æ–°ã—ã„é †åºã‚’ä¿å­˜ã™ã‚‹é…åˆ—
                for (let i = 0; i < images.length; i++) {
                    const index = (i + stopPosition) % images.length; // å‘¨æœŸçš„ã«ç”»åƒã‚’é…ç½®
                    newSrcs[i] = images[index].src; // å…ƒã®é…åˆ—ã®å‚ç…§å€¤ã‚’ä¿å­˜
                }

                // å…ƒã®é…åˆ—ã«æ–°ã—ã„é †åºã‚’é©ç”¨
                for (let i = 0; i < images.length; i++) {
                    images[i].src = newSrcs[i];
                }
                // å›è»¢åœæ­¢ã‚’è¨˜éŒ²
                isRotating[slotIndex] = false;
                // ã™ã¹ã¦ã®ãƒªãƒ¼ãƒ«ãŒåœæ­¢ã—ãŸã‹ç¢ºèªã—ã€ã‚¹ã‚¿ãƒ¼ãƒˆãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹åŒ–
                if (isRotating.every(flag => !flag)) {
                    // é…å»¶ã‚’è¿½åŠ ã—ã¦ `checkMatching` ã‚’å‘¼ã³å‡ºã™
                    setTimeout(() => {
                        // ã‚¹ã‚¿ãƒ¼ãƒˆãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹åŒ–
                        document.getElementById("start").disabled = false;

                        // æƒã„ã‚’åˆ¤å®š
                        checkMatching();
                    }, 50); // 50ms ã®é…å»¶ã‚’è¿½åŠ 
                }
            });
        };

        // ã‚·ãƒ³ãƒœãƒ«ã”ã¨ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©
        const symbolEvents = {
            "daikyo-daikyo-daikyo": () => {
                nextSpinMultiplier = 3; // æ¬¡å›ã®ã‚¹ãƒ”ãƒ³é™å®šã§å€ç‡ã‚’2å€ã«è¨­å®š
                alert("æ¬¡ã®ã‚¹ãƒ”ãƒ³ã§ç²å¾—ãƒã‚¤ãƒ³ãƒˆãŒ3å€ã«ãªã‚Šã¾ã™ï¼");
            }
            // ä»–ã®ã‚·ãƒ³ãƒœãƒ«ã‚‚ã“ã“ã«è¿½åŠ å¯èƒ½
        };

        // æƒã„ã‚’åˆ¤å®šã™ã‚‹é–¢æ•°
        const checkMatching = () => {
            // å„ãƒªãƒ¼ãƒ«ã®ç”»åƒãƒªã‚¹ãƒˆã‹ã‚‰ã€ä¸Šéƒ¨3ã¤ã®ç”»åƒã‚’å–å¾—
            const topImages = [];
            for (let i = 0; i < 3; i++) {
                const slot = document.querySelector(`#slot-${i}`);
                const images = slot.querySelectorAll("img");
                topImages.push([
                    getFileName(images[1].src), // ä¸Šæ®µ
                    getFileName(images[2].src), // ä¸­æ®µ
                    getFileName(images[3].src), // ä¸‹æ®µ
                ]);
            }

            // æƒã„åˆ¤å®š
            let score = 0;
            let matchedLines = 0;
            // æƒã„ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹é–¢æ•°
            const checkLine = (line) => {
                const lineKey = line.join("-");
                console.log("lineKey:", lineKey);
                // ãƒã‚¤ãƒ³ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«ã«ä¸€è‡´ã™ã‚‹çµ„ã¿åˆã‚ã›ãŒã‚ã‚Œã°ãƒã‚¤ãƒ³ãƒˆåŠ ç®—
                if (lineKey in pointsTable) {
                    score += pointsTable[lineKey];
                    matchedLines++;
                    if (symbolEvents[lineKey]) {
                        symbolEvents[lineKey](); // ã‚·ãƒ³ãƒœãƒ«ã‚¤ãƒ™ãƒ³ãƒˆã‚’å®Ÿè¡Œ
                    }
                }

            };
            /// æ¨ªãƒ©ã‚¤ãƒ³ã‚’ãƒã‚§ãƒƒã‚¯
            for (let row = 0; row < 3; row++) {
                checkLine([topImages[0][row], topImages[1][row], topImages[2][row]]);
            }
            // æ–œã‚ãƒ©ã‚¤ãƒ³ã‚’ãƒã‚§ãƒƒã‚¯
            checkLine([topImages[0][0], topImages[1][1], topImages[2][2]]);
            checkLine([topImages[0][2], topImages[1][1], topImages[2][0]]);

            // ãƒã‚¤ãƒ³ãƒˆã‚’åŠ ç®—
            if (score > 0) {
                score *= multiplier; // å€ç‡ã‚’é©ç”¨
                if (matchedLines > 1) {
                    score *= matchedLines * 3; // ãƒ©ã‚¤ãƒ³ã®æ•° Ã— 3å€ã‚’é©ç”¨
                }
                points += score;
                updatePoints();

                // 1000ãƒã‚¤ãƒ³ãƒˆã«é”ã—ãŸå ´åˆã®ç‰¹åˆ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨èƒŒæ™¯å¤‰æ›´
                if (points >= 1000) {
                    handleThousandPoints();
                    alert(`ãŠã‚ã§ã¨ã†ï¼ ${score} å¾³ãƒã‚¤ãƒ³ãƒˆã‚’ç²å¾—ã—ã¾ã—ãŸï¼`);
                    alert(`1000 å¾³ãƒã‚¤ãƒ³ãƒˆé”æˆã—ã¾ã—ãŸï¼1å¹´é–“ä¸€æ—¥3å›ã¾ã§ã®å…ç½ªç¬¦ã ã­ï¼`);
                } else {
                    alert(`ãŠã‚ã§ã¨ã†ï¼${score} å¾³ãƒã‚¤ãƒ³ãƒˆã‚’ç²å¾—ã—ã¾ã—ãŸï¼`);
                }
            }            
        };

        // ç”»åƒã® `src` ã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«åã‚’æŠ½å‡ºã™ã‚‹é–¢æ•°
        const getFileName = (src) => {
            const fileName = src.split('/').pop().split('?')[0]; // ãƒ•ã‚¡ã‚¤ãƒ«åã®å–å¾—
            return fileName.replace('.png', ''); // .pngã‚’å‰Šé™¤
        };


        // 1000ãƒã‚¤ãƒ³ãƒˆé”æˆæ™‚ã®ç‰¹åˆ¥å‡¦ç†ã‚’é–¢æ•°åŒ–
        const handleThousandPoints = () => {
            // ãƒšãƒ¼ã‚¸ã®èƒŒæ™¯ã‚’æ­£æœˆã£ã½ãã™ã‚‹
            document.body.style.backgroundImage = "url('images/bg.png')";  // èƒŒæ™¯ç”»åƒã‚’æ­£æœˆãƒ†ãƒ¼ãƒã«å¤‰æ›´
            document.body.style.backgroundSize = "cover";  // èƒŒæ™¯ç”»åƒã‚’ç”»é¢ã«åˆã‚ã›ã‚‹
            document.body.style.backgroundPosition = "center";  // èƒŒæ™¯ç”»åƒã®ä½ç½®ã‚’ä¸­å¤®ã«è¨­å®š

            // æ–°å¹´ã‚’ç¥ã†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹
            const newYearMessage = document.createElement('div');
            newYearMessage.textContent = "ğŸ‰ æ–°å¹´ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼ ğŸ‰";
            newYearMessage.style.position = "absolute";
            newYearMessage.style.top = "260px";
            newYearMessage.style.left = "50%";
            newYearMessage.style.transform = "translate(-50%, -50%)";
            newYearMessage.style.fontSize = "3em";
            newYearMessage.style.color = "gold";
            newYearMessage.style.textShadow = "2px 2px 5px rgba(0, 0, 0, 0.7)";
            newYearMessage.style.textAlign = "center";
            newYearMessage.style.color = "white";  // æ–‡å­—è‰²ã‚’ç™½ã«å¤‰æ›´
            newYearMessage.style.backgroundColor = "red";  // æ–‡å­—è‰²ã‚’ç™½ã«å¤‰æ›´
            newYearMessage.style.fontFamily = "cursive, sans-serif";  // æ­£æœˆã£ã½ã„ãƒ•ã‚©ãƒ³ãƒˆã«å¤‰æ›´
            document.body.appendChild(newYearMessage);
        };

        // ã‚¹ã‚¿ãƒ¼ãƒˆãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã¨ãã®å‡¦ç†
        document.getElementById("start").addEventListener("click", () => {
            // ãƒã‚¤ãƒ³ãƒˆãŒè¶³ã‚Šãªã„å ´åˆã¯ã‚¢ãƒ©ãƒ¼ãƒˆ
            if (points < 10) {
                alert("ãƒã‚¤ãƒ³ãƒˆãŒè¶³ã‚Šã¾ã›ã‚“ï¼");
                return;
            }
            points -= 10;
            updatePoints();  // ãƒã‚¤ãƒ³ãƒˆã‚’æ›´æ–°

            // æ¬¡å›ã‚¹ãƒ”ãƒ³å€ç‡ã‚’ç¾åœ¨ã®å€ç‡ã«é©ç”¨ã—ã€ãƒªã‚»ãƒƒãƒˆ
            multiplier = nextSpinMultiplier;
            nextSpinMultiplier = 1; // æ¬¡å›ã‚¹ãƒ”ãƒ³å€ç‡ã‚’ãƒªã‚»ãƒƒãƒˆ

            // ã‚¹ãƒ­ãƒƒãƒˆå›è»¢ã‚’é–‹å§‹
            initializeSlots();
            startSlotRotation();
            // å„ãƒªãƒ¼ãƒ«ãŒå›è»¢ä¸­ã§ã‚ã‚‹ã“ã¨ã‚’è¨­å®š
            isRotating = [true, true, true];
            // ã‚¹ãƒˆãƒƒãƒ—ãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹åŒ–
            document.querySelectorAll(".stop").forEach((button) => {
                button.disabled = false;
            });
            // ã‚¹ã‚¿ãƒ¼ãƒˆãƒœã‚¿ãƒ³ç„¡åŠ¹åŒ–
            document.getElementById("start").disabled = true;
        });

        // ã‚¹ãƒˆãƒƒãƒ—ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã¨ãã®å‡¦ç†
        document.querySelectorAll(".stop").forEach((button, index) => {
            button.addEventListener("click", () => {
                // ãƒªãƒ¼ãƒ«ãŒå›è»¢ä¸­ãªã‚‰åœæ­¢
                if (isRotating[index]) {
                    stopSlotRotation(index);
                }
                // ã‚¹ãƒˆãƒƒãƒ—ãƒœã‚¿ãƒ³ç„¡åŠ¹åŒ–
                button.disabled = true;
            });
        });

        // ãƒšãƒ¼ã‚¸ãŒèª­ã¿è¾¼ã¾ã‚ŒãŸéš›ã«ã‚¹ãƒ­ãƒƒãƒˆã‚’åˆæœŸåŒ–
        window.onload = () => {
            initializeSlots();
            renderPointsTable();
        };
    </script>
    
</body>
</html>

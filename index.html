<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãŠã¿ãã˜ã‚¹ãƒ­ãƒƒãƒˆ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f0f0f0;
            margin: 0;
            padding: 0;
        }
        h1 {
            margin-top: 10px;
        }
        .happy-new-year {
            font-size: 2em;
            font-weight: bold;
            color: #ff5722;
        }
        .rules {
            font-size: 0.9em;
            margin: 10px auto;
            width: 80%;
            text-align: left;
            background-color: #fff;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        .slot-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px auto;
            width: 320px;
            background-color: #fff;
            padding: 10px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            position: relative;
        }
        .slot {
            width: 100px;
            height: 300px;
            display: flex;
            align-items: flex-start;
            border: 1px solid #ccc;
            border-radius: 10px;
            background-color: #e0e0e0;
            overflow: hidden;
            position: relative;
            display: flex;
            flex-direction: column;
        }
        .slot img {
            width: 100%;
            height: auto;
            animation: none;
        }
        .highlight {
            background-color: #ffeb3b;
        }
        .controls {
            margin: 20px 0;
        }
        .points {
            font-size: 1.2em;
            margin: 10px 0;
        }
        button {
            padding: 10px 20px;
            font-size: 1em;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:active {
            transform: scale(0.98);
        }
        button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
        .start {
            background-color: #28a745;
            color: #fff;
            width: 320px;
        }
        .stop {
            background-color: #dc3545;
            color: #fff;
        }
        .button-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 10px;
        }        
        @keyframes slide-up {
            0% { transform: translateY(0); }
            100% { transform: translateY(-1300%); }
        }
    </style>
</head>
<body>
    <div class="happy-new-year">ğŸ‰ Happy New Year 2025 ğŸ‰</div>
    <h1>ãŠã¿ãã˜ã‚¹ãƒ­ãƒƒãƒˆ</h1>
    <h2>made by ChatGPT</h2>
    <div class="rules">
        <strong>ãƒ«ãƒ¼ãƒ«:</strong>
        <ul>
            <li>ã‚¹ã‚¿ãƒ¼ãƒˆãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã‚¹ãƒ­ãƒƒãƒˆãŒå›è»¢ã—ã€10å¾³ãƒã‚¤ãƒ³ãƒˆæ¶ˆè²»ã—ã¾ã™ã€‚</li>
            <li>ã‚¹ãƒˆãƒƒãƒ—ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦å„åˆ—ã‚’åœæ­¢ã§ãã¾ã™ã€‚</li>
            <li>æ¨ªã¾ãŸã¯æ–œã‚ã«åŒã˜ç”»åƒãŒæƒã†ã¨ãƒã‚¤ãƒ³ãƒˆãŒåŠ ç®—ã•ã‚Œã¾ã™ã€‚</li>
            <li>åˆæœŸãƒã‚¤ãƒ³ãƒˆã¯100å¾³ãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚0å¾³ãƒã‚¤ãƒ³ãƒˆã«ãªã‚‹ã¨ä¸å¹¸ã§ã™ã€‚</li>
            <li>å¾³ã‚’è²¯ã‚ã¦ã‚ˆã„ï¼‘å¹´ã«ã—ã¾ã—ã‚‡ã†ã€‚</li>
        </ul>
    </div>
    <div class="slot-container" id="slot-container">
        <div class="slot" id="slot-0"></div>
        <div class="slot" id="slot-1"></div>
        <div class="slot" id="slot-2"></div>
    </div>
    <div class="button-container">
        <button class="stop" id="stop-0" disabled>ã‚¹ãƒˆãƒƒãƒ—1</button>
        <button class="stop" id="stop-1" disabled>ã‚¹ãƒˆãƒƒãƒ—2</button>
        <button class="stop" id="stop-2" disabled>ã‚¹ãƒˆãƒƒãƒ—3</button>
    </div>
    <div class="controls">
        <button class="start" id="start">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
    </div>
    <div class="points" id="points">100 å¾³ãƒã‚¤ãƒ³ãƒˆ</div>
    <script>
        // ç”»åƒãƒ‡ãƒ¼ã‚¿ã¨ãƒã‚¤ãƒ³ãƒˆãƒ†ãƒ¼ãƒ–ãƒ«
        const reel1Images = ["daikichi1.png", "kichi.png", "kichi.png", "chukichi1.png", "chukichi1.png", "shokichi.png", "shokichi.png", "suekichi.png", "suekichi.png", "suekichi.png", "kyo1.png", "kyo1.png", "daikyo.png"];
        const reel2Images = ["daikichi2.png", "kichi.png", "kichi.png", "chukichi2.png", "chukichi2.png", "shokichi.png", "shokichi.png", "suekichi.png", "suekichi.png", "suekichi.png", "kyo2.png", "kyo2.png", "daikyo.png"];
        const reel3Images = ["daikichi3.png", "kichi.png", "kichi.png", "chukichi3.png", "chukichi3.png", "shokichi.png", "shokichi.png", "suekichi.png", "suekichi.png", "suekichi.png", "kyo3.png", "kyo3.png", "daikyo.png"];
        const pointsTable = { "daikichi.png": 100, "kichi.png": 50, "chukichi.png": 30, "shokichi.png": 20, "suekichi.png": 10, "kyo.png": 5, "daikyo.png": 0 };
        let points = 100;
        let multiplier = 1; // ç¾åœ¨ã®å€ç‡
        let nextSpinMultiplier = 1; // æ¬¡å›ã‚¹ãƒ”ãƒ³æ™‚ã®å€ç‡
        let slots = [[], [], []];  // ã‚¹ãƒ­ãƒƒãƒˆã®å†…å®¹
        let isRotating = [false, false, false];  // å„ãƒªãƒ¼ãƒ«ãŒå›è»¢ä¸­ã‹ã©ã†ã‹

        // ãƒã‚¤ãƒ³ãƒˆã‚’æ›´æ–°ã™ã‚‹é–¢æ•°
        const updatePoints = () => {
            document.getElementById("points").textContent = `${points} å¾³ãƒã‚¤ãƒ³ãƒˆ`;
        };

        // ç”»åƒã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã—ã¦é•·ã•å€ã«ã—ãŸé…åˆ—ã‚’è¿”ã™é–¢æ•°
        const shuffleImages = (reelImages) => {
            const shuffled = [...reelImages].sort(() => Math.random() - 0.5);  // ã‚·ãƒ£ãƒƒãƒ•ãƒ«
            return shuffled.concat(shuffled).slice(0, shuffled.length * 2);  // ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã—ãŸç”»åƒã‚’2å€ã«ã—ã¦èª¿æ•´
        };

        // ã‚¹ãƒ­ãƒƒãƒˆã‚’åˆæœŸåŒ–ã™ã‚‹é–¢æ•°
        const initializeSlots = () => {
            const reelImages = [reel1Images, reel2Images, reel3Images];
            for (let i = 0; i < 3; i++) {
                const shuffledImages = shuffleImages(reelImages[i])
                slots[i] = shuffledImages;  // ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã—ãŸç”»åƒã‚’ã‚»ãƒƒãƒˆ

                const slot = document.querySelector(`#slot-${i}`);
                slot.innerHTML = '';  // æ—¢å­˜ã®ç”»åƒã‚’ã‚¯ãƒªã‚¢

                // ç”»åƒã‚’ã‚¹ãƒ­ãƒƒãƒˆã«è¿½åŠ 
                for (let j = 0; j < shuffledImages.length; j++) {
                    const img = document.createElement("img");
                    img.src = `images/${slots[i][j]}`;
                    slot.appendChild(img);
                }
            }
        };

        const calculateAnimationDuration = (points) => {
            const maxDuration = 2;    // æœ€å¤§ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³æ™‚é–“ï¼ˆ1ãƒã‚¤ãƒ³ãƒˆã®å ´åˆï¼‰
            const midDuration = 1;    // ä¸­é–“ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³æ™‚é–“ï¼ˆ100ãƒã‚¤ãƒ³ãƒˆã®å ´åˆï¼‰
            const minDuration = 0.3;  // æœ€å°ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³æ™‚é–“ï¼ˆ1000ãƒã‚¤ãƒ³ãƒˆã®å ´åˆï¼‰

            // 1ã‹ã‚‰1000ã®ç¯„å›²ã«å¯¾ã—ã¦ã€ãƒªãƒ‹ã‚¢è£œé–“ã‚’è¡Œã†
            const duration = maxDuration - (points - 1) / (1000 - 1) * (maxDuration - minDuration);

            // 100ãƒã‚¤ãƒ³ãƒˆã®æ™‚ã«1ç§’ã«ãªã‚‹ã‚ˆã†èª¿æ•´
            return Math.max(minDuration, Math.min(duration, maxDuration));  // ç¯„å›²å¤–ã«ã¯ãªã‚‰ãªã„ã‚ˆã†ã«èª¿æ•´
        };


        // ã‚¹ãƒ­ãƒƒãƒˆå›è»¢ã‚’é–‹å§‹ã™ã‚‹é–¢æ•°
        const startSlotRotation = () => {
            // ãƒã‚¤ãƒ³ãƒˆã«åŸºã¥ã„ã¦ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é€Ÿåº¦ã‚’è¨ˆç®—
            const animationDuration = calculateAnimationDuration(points);
            // å„ãƒªãƒ¼ãƒ«ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹å§‹
            for (let i = 0; i < 3; i++) {
                const slot = document.querySelector(`#slot-${i}`);
                const images = slot.querySelectorAll("img");
                // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¨­å®š
                console.log(`Reel ${i} images:`);
                images.forEach(img => {
                    console.log("  images:", getFileName(img.src));
                    img.style.animation = `slide-up ${animationDuration}s linear infinite`;  // ç”»åƒãŒæ­¢ã¾ã‚‰ãšã«å›è»¢
                });
            }
        };

        // ã‚¹ãƒ­ãƒƒãƒˆå›è»¢ã‚’åœæ­¢ã™ã‚‹é–¢æ•°
        const stopSlotRotation = (slotIndex) => {
            const slot = document.querySelector(`#slot-${slotIndex}`);
            const images = slot.querySelectorAll("img");
            const imageHeight = images[0].offsetHeight; // ç”»åƒã®é«˜ã•ã‚’å–å¾—

            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åœæ­¢ã™ã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’æ­£ç¢ºã«è¨ˆç®—
            // ç¾åœ¨ã®ç”»åƒã®ä½ç½®ã‚’å–å¾—ï¼ˆtranslateYï¼‰
            const computedStyle = getComputedStyle(images[0]);
            const matrix = computedStyle.transform; // ä¾‹: "matrix(1, 0, 0, 1, 0, -400)"
            
            let currentTranslateY = 0;
            if (matrix !== "none") {
                const values = matrix.match(/matrix.*\((.+)\)/)[1].split(', ');
                currentTranslateY = parseFloat(values[5]); // Y è»¸æ–¹å‘ã®å€¤ã‚’å–å¾—
            }

            // å†æç”»ã‚’å¾…ã¤
            requestAnimationFrame(() => {
                // åœæ­¢ä½ç½®ã‚’è¨ˆç®—
                const stopPosition = Math.round(Math.abs(currentTranslateY) / imageHeight) % images.length;
                console.log("stopPosition:", stopPosition);
                // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åœæ­¢
                images.forEach((img) => {
                    img.style.animation = "none";
                });
                // ã‚¹ãƒ­ãƒƒãƒˆã®ç”»åƒã‚’åœæ­¢ä½ç½®ã«åˆã‚ã›ã‚‹
                const newSrcs = []; // ä¸€æ™‚çš„ã«æ–°ã—ã„é †åºã‚’ä¿å­˜ã™ã‚‹é…åˆ—
                for (let i = 0; i < images.length; i++) {
                    const index = (i + stopPosition) % images.length; // å‘¨æœŸçš„ã«ç”»åƒã‚’é…ç½®
                    newSrcs[i] = images[index].src; // å…ƒã®é…åˆ—ã®å‚ç…§å€¤ã‚’ä¿å­˜
                }

                // å…ƒã®é…åˆ—ã«æ–°ã—ã„é †åºã‚’é©ç”¨
                for (let i = 0; i < images.length; i++) {
                    images[i].src = newSrcs[i];
                }
                // å›è»¢åœæ­¢ã‚’è¨˜éŒ²
                isRotating[slotIndex] = false;
                // ã™ã¹ã¦ã®ãƒªãƒ¼ãƒ«ãŒåœæ­¢ã—ãŸã‹ç¢ºèªã—ã€ã‚¹ã‚¿ãƒ¼ãƒˆãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹åŒ–
                if (isRotating.every(flag => !flag)) {
                    // é…å»¶ã‚’è¿½åŠ ã—ã¦ `checkMatching` ã‚’å‘¼ã³å‡ºã™
                    setTimeout(() => {
                        // ã‚¹ã‚¿ãƒ¼ãƒˆãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹åŒ–
                        document.getElementById("start").disabled = false;

                        // æƒã„ã‚’åˆ¤å®š
                        checkMatching();
                    }, 50); // 50ms ã®é…å»¶ã‚’è¿½åŠ 
                }
            });
        };


        // ã‚·ãƒ³ãƒœãƒ«ã”ã¨ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©
        const symbolEvents = {
            "daikyo.png": () => {
                nextSpinMultiplier = 3; // æ¬¡å›ã®ã‚¹ãƒ”ãƒ³é™å®šã§å€ç‡ã‚’2å€ã«è¨­å®š
                alert("æ¬¡ã®ã‚¹ãƒ”ãƒ³ã§ç²å¾—ãƒã‚¤ãƒ³ãƒˆãŒ3å€ã«ãªã‚Šã¾ã™ï¼");
            },
            // ä»–ã®ã‚·ãƒ³ãƒœãƒ«ã‚‚ã“ã“ã«è¿½åŠ å¯èƒ½
        };

        // æƒã„ã‚’åˆ¤å®šã™ã‚‹é–¢æ•°
        const checkMatching = () => {
            // å„ãƒªãƒ¼ãƒ«ã®ç”»åƒãƒªã‚¹ãƒˆã‹ã‚‰ã€ä¸Šéƒ¨3ã¤ã®ç”»åƒã‚’å–å¾—
            const topImages = [];
            for (let i = 0; i < 3; i++) {

                const slot = document.querySelector(`#slot-${i}`);
                const images = slot.querySelectorAll("img");
                
                topImages.push([
                    getFileName(images[0].src), // ä¸Šæ®µ
                    getFileName(images[1].src), // ä¸­æ®µ
                    getFileName(images[2].src), // ä¸‹æ®µ
                ]);
            }
            // ç”»åƒåã‚’çµ±ä¸€ã™ã‚‹ãŸã‚ã®å‡¦ç†
            const normalizeImageName = (fileName) => {
                if (fileName.includes("daikichi")) {
                    return "daikichi.png";  // daikichi1, daikichi2, daikichi3 ã‚’ã¾ã¨ã‚ã¦æ‰±ã†
                } else if (fileName.includes("chukichi")) {
                    return "chukichi.png";  // chukichi1, chukichi2, chukichi3 ã‚’ã¾ã¨ã‚ã¦æ‰±ã†
                } else if (fileName.match(/^kyo[1-3]\.png$/)) {
                    return "kyo.png";  // kyo1.png, kyo2.png, kyo3.png ã‚’ã¾ã¨ã‚ã¦æ‰±ã†
                }
                return fileName;  // ãã®ä»–ã¯ãã®ã¾ã¾
            };
             // å„ãƒªãƒ¼ãƒ«ã®ç”»åƒã‚’çµ±ä¸€ã—ãŸåå‰ã«å¤‰æ›
            const normalizedTopImages = topImages.map(row => row.map(normalizeImageName));

            // æƒã„åˆ¤å®š
            let score = 0;
            let matchedLines = 0;
            // æƒã„ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹é–¢æ•°
            const checkLine = (line) => {
                if (line[0] === line[1] && line[1] === line[2]) {
                    const matchedSymbol = line[0];
                    score += pointsTable[matchedSymbol] || 0; // ãƒã‚¤ãƒ³ãƒˆã‚’åŠ ç®—
                    matchedLines++; // æƒã£ãŸãƒ©ã‚¤ãƒ³ã‚’ã‚«ã‚¦ãƒ³ãƒˆ
                    if (symbolEvents[matchedSymbol]) {
                        symbolEvents[matchedSymbol](); // ã‚·ãƒ³ãƒœãƒ«ã‚¤ãƒ™ãƒ³ãƒˆã‚’å®Ÿè¡Œ
                    }
                }
            };
            /// æ¨ªãƒ©ã‚¤ãƒ³ã‚’ãƒã‚§ãƒƒã‚¯
            for (let row = 0; row < 3; row++) {
                checkLine([normalizedTopImages[0][row], normalizedTopImages[1][row], normalizedTopImages[2][row]]);
            }
            // æ–œã‚ãƒ©ã‚¤ãƒ³ã‚’ãƒã‚§ãƒƒã‚¯
            checkLine([normalizedTopImages[0][0], normalizedTopImages[1][1], normalizedTopImages[2][2]]);
            checkLine([normalizedTopImages[0][2], normalizedTopImages[1][1], normalizedTopImages[2][0]]);

            // ãƒã‚¤ãƒ³ãƒˆã‚’åŠ ç®—
            if (score > 0) {
                score *= multiplier; // å€ç‡ã‚’é©ç”¨
                if (matchedLines > 1) {
                    score *= matchedLines * 3; // ãƒ©ã‚¤ãƒ³ã®æ•° Ã— 3å€ã‚’é©ç”¨
                }
                points += score;
                updatePoints();

                // 1000ãƒã‚¤ãƒ³ãƒˆã«é”ã—ãŸå ´åˆã®ç‰¹åˆ¥ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨èƒŒæ™¯å¤‰æ›´
                if (points >= 1000) {
                    handleThousandPoints();
                    alert(`ãŠã‚ã§ã¨ã†ï¼ ${score} å¾³ãƒã‚¤ãƒ³ãƒˆã‚’ç²å¾—ã—ã¾ã—ãŸï¼`);
                    alert(`1000 å¾³ãƒã‚¤ãƒ³ãƒˆé”æˆã—ã¾ã—ãŸï¼1å¹´é–“ä¸€æ—¥3å›ã¾ã§ã®å…ç½ªç¬¦ã ã­ï¼`);
                } else {
                    alert(`ãŠã‚ã§ã¨ã†ï¼${score} å¾³ãƒã‚¤ãƒ³ãƒˆã‚’ç²å¾—ã—ã¾ã—ãŸï¼`);
                }
            }            
        };

        // ç”»åƒã® `src` ã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«åã‚’æŠ½å‡ºã™ã‚‹é–¢æ•°
        const getFileName = (src) => {
            return src.split('/').pop().split('?')[0]; // URLã®æœ«å°¾ã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«åã‚’æŠ½å‡ºï¼ˆã‚¯ã‚¨ãƒªã‚¹ãƒˆãƒªãƒ³ã‚°å¯¾å¿œï¼‰
        };

        // 1000ãƒã‚¤ãƒ³ãƒˆé”æˆæ™‚ã®ç‰¹åˆ¥å‡¦ç†ã‚’é–¢æ•°åŒ–
        const handleThousandPoints = () => {
            // ãƒšãƒ¼ã‚¸ã®èƒŒæ™¯ã‚’æ­£æœˆã£ã½ãã™ã‚‹
            document.body.style.backgroundImage = "url('images/bg.png')";  // èƒŒæ™¯ç”»åƒã‚’æ­£æœˆãƒ†ãƒ¼ãƒã«å¤‰æ›´
            document.body.style.backgroundSize = "cover";  // èƒŒæ™¯ç”»åƒã‚’ç”»é¢ã«åˆã‚ã›ã‚‹
            document.body.style.backgroundPosition = "center";  // èƒŒæ™¯ç”»åƒã®ä½ç½®ã‚’ä¸­å¤®ã«è¨­å®š

            // æ–°å¹´ã‚’ç¥ã†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹
            const newYearMessage = document.createElement('div');
            newYearMessage.textContent = "ğŸ‰ æ–°å¹´ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼ ğŸ‰";
            newYearMessage.style.position = "absolute";
            newYearMessage.style.top = "260px";
            newYearMessage.style.left = "50%";
            newYearMessage.style.transform = "translate(-50%, -50%)";
            newYearMessage.style.fontSize = "3em";
            newYearMessage.style.color = "gold";
            newYearMessage.style.textShadow = "2px 2px 5px rgba(0, 0, 0, 0.7)";
            newYearMessage.style.textAlign = "center";
            newYearMessage.style.color = "white";  // æ–‡å­—è‰²ã‚’ç™½ã«å¤‰æ›´
            newYearMessage.style.backgroundColor = "red";  // æ–‡å­—è‰²ã‚’ç™½ã«å¤‰æ›´
            newYearMessage.style.fontFamily = "cursive, sans-serif";  // æ­£æœˆã£ã½ã„ãƒ•ã‚©ãƒ³ãƒˆã«å¤‰æ›´
            document.body.appendChild(newYearMessage);
        };

        // ã‚¹ã‚¿ãƒ¼ãƒˆãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã¨ãã®å‡¦ç†
        document.getElementById("start").addEventListener("click", () => {
            // ãƒã‚¤ãƒ³ãƒˆãŒè¶³ã‚Šãªã„å ´åˆã¯ã‚¢ãƒ©ãƒ¼ãƒˆ
            if (points < 10) {
                alert("ãƒã‚¤ãƒ³ãƒˆãŒè¶³ã‚Šã¾ã›ã‚“ï¼");
                return;
            }
            points -= 10;
            updatePoints();  // ãƒã‚¤ãƒ³ãƒˆã‚’æ›´æ–°

            // æ¬¡å›ã‚¹ãƒ”ãƒ³å€ç‡ã‚’ç¾åœ¨ã®å€ç‡ã«é©ç”¨ã—ã€ãƒªã‚»ãƒƒãƒˆ
            multiplier = nextSpinMultiplier;
            nextSpinMultiplier = 1; // æ¬¡å›ã‚¹ãƒ”ãƒ³å€ç‡ã‚’ãƒªã‚»ãƒƒãƒˆ

            // ã‚¹ãƒ­ãƒƒãƒˆå›è»¢ã‚’é–‹å§‹
            initializeSlots();
            startSlotRotation();
            // å„ãƒªãƒ¼ãƒ«ãŒå›è»¢ä¸­ã§ã‚ã‚‹ã“ã¨ã‚’è¨­å®š
            isRotating = [true, true, true];
            // ã‚¹ãƒˆãƒƒãƒ—ãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹åŒ–
            document.querySelectorAll(".stop").forEach((button) => {
                button.disabled = false;
            });
            // ã‚¹ã‚¿ãƒ¼ãƒˆãƒœã‚¿ãƒ³ç„¡åŠ¹åŒ–
            document.getElementById("start").disabled = true;
        });

        // ã‚¹ãƒˆãƒƒãƒ—ãƒœã‚¿ãƒ³ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸã¨ãã®å‡¦ç†
        document.querySelectorAll(".stop").forEach((button, index) => {
            button.addEventListener("click", () => {
                // ãƒªãƒ¼ãƒ«ãŒå›è»¢ä¸­ãªã‚‰åœæ­¢
                if (isRotating[index]) {
                    stopSlotRotation(index);
                }
                // ã‚¹ãƒˆãƒƒãƒ—ãƒœã‚¿ãƒ³ç„¡åŠ¹åŒ–
                button.disabled = true;
            });
        });

        // ãƒšãƒ¼ã‚¸ãŒèª­ã¿è¾¼ã¾ã‚ŒãŸéš›ã«ã‚¹ãƒ­ãƒƒãƒˆã‚’åˆæœŸåŒ–
        window.onload = () => {
            initializeSlots();
        };
    </script>
    
</body>
</html>
